<!DOCTYPE html>
<html lang="pt-BR" data-theme="system">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title }} — Guias</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />
  <link rel="stylesheet" href="{{ '/assets/css/guides.css' | relative_url }}" />
  <link
    rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>🧬</text></svg>"
  />
</head>
<body>
  {%- assign current = page.url | replace:'index.html','' -%}

  {%- comment -%} URLs principais {%- endcomment -%}
  {%- assign gui = '/guias/' -%}
  {%- assign k2  = '/guias/ferramentas/kraken2/' -%}
  {%- assign q2  = '/guias/ferramentas/qiime2/' -%}
  {%- assign bb  = '/guias/ferramentas/biobakery/' -%}
  {%- assign an  = '/guias/ambientes/anaconda/' -%}
  {%- assign bcl = '/guias/conversores/bcl2fastq/' -%}
  {%- assign wsl = '/guias/plataforma/wsl/' -%}
  {%- assign fq  = '/guias/qualidade/fastq/' -%}
  {%- assign fqp = '/guias/qualidade/fastp/' -%}
  {%- assign flc = '/guias/qualidade/falco/' -%}

  <!-- HEADER -->
  <header>
    <div class="container nav">
      <a class="brand" href="{{ '/' | relative_url }}" aria-label="Página inicial">
        <span class="logo">🧬</span>
        <strong>Christopher William Lee</strong>
      </a>
      <nav class="links" aria-label="Navegação primária">
        <a href="{{ '/#projetos' | relative_url }}">Projetos</a>
        <a href="{{ '/#publicacoes' | relative_url }}">Publicações</a>
        <a href="{{ '/#sobre' | relative_url }}">Sobre</a>
        <a href="{{ '/#contato' | relative_url }}">Contato</a>
        <a href="{{ gui | relative_url }}"
           class="{% if current == gui %}active{% endif %}"
           {% if current == gui %}aria-current="page"{% endif %}>Guias</a>
        <button class="theme-toggle" id="themeBtn" title="Alternar tema">🌗</button>
      </nav>
    </div>
  </header>

  <!-- CONTEÚDO -->
  <main class="container">
    <section class="guides-shell">
      <!-- SIDEBAR -->
      <aside class="sidebar" aria-label="Índice dos guias">
        <div class="side-group">
          <h3>Ferramentas</h3>
          <a href="{{ k2 | relative_url }}" class="side-item {% if current == k2 %}active{% endif %}">Kraken2</a>
          <a href="{{ q2 | relative_url }}" class="side-item {% if current == q2 %}active{% endif %}">QIIME2</a>
          <a href="{{ bb | relative_url }}" class="side-item {% if current == bb %}active{% endif %}">BioBakery</a>
        </div>

        <div class="side-group">
          <h3>Gerenciamento de ambientes</h3>
          <a href="{{ an | relative_url }}" class="side-item {% if current == an %}active{% endif %}">Anaconda</a>
        </div>

        <div class="side-group">
          <h3>Conversor de arquivos</h3>
          <a href="{{ bcl | relative_url }}" class="side-item {% if current == bcl %}active{% endif %}">BCL2fastq</a>
        </div>

        <div class="side-group">
          <h3>Plataforma</h3>
          <a href="{{ wsl | relative_url }}" class="side-item {% if current == wsl %}active{% endif %}">WSL</a>
        </div>

        <div class="side-group">
          <h3>Qualidade de dados</h3>
          <a href="{{ fq  | relative_url }}" class="side-item {% if current == fq  %}active{% endif %}">FASTQ</a>
          <a href="{{ fqp | relative_url }}" class="side-item {% if current == fqp %}active{% endif %}">FASTP</a>
          <a href="{{ flc | relative_url }}" class="side-item {% if current == flc %}active{% endif %}">FALCO</a>
        </div>
      </aside>

      <!-- CONTEÚDO DO MARKDOWN -->
      <section class="reader" id="reader">
        <h1>{{ page.title }}</h1>
        {{ content }}
      </section>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">© <span id="year"></span> Christopher William Lee — Guias</div>
  </footer>

  <script>
    // Ano no rodapé
    document.getElementById('year').textContent = new Date().getFullYear();

    // Alternância de tema
    (function () {
      const btn = document.getElementById('themeBtn');
      if(!btn) return;
      const root = document.documentElement;
      const KEY = 'cwlee-theme';
      const saved = localStorage.getItem(KEY) || 'system';
      root.setAttribute('data-theme', saved);
      const nextTheme = c => c === 'light' ? 'dark' : c === 'dark' ? 'system' : 'light';
      btn.addEventListener('click', () => {
        const current = root.getAttribute('data-theme') || 'system';
        const next = nextTheme(current);
        root.setAttribute('data-theme', next);
        localStorage.setItem(KEY, next);
        btn.textContent = '🌗';
      });
    })();
  </script>
</body>
</html>
