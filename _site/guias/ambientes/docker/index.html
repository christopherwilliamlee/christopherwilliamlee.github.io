<!DOCTYPE html>
<html lang="pt-BR" data-theme="system">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tutorial de instala√ß√£o do Docker ‚Äî Guias</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/guides.css" />
  <link
    rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üß¨</text></svg>"/>
</head>
<body><!-- HEADER -->
  <header>
    <div class="container nav">
      <a class="brand" href="/" aria-label="P√°gina inicial">
        <span class="logo">üß¨</span>
        <strong>Christopher William Lee</strong>
      </a>
      <nav class="links" aria-label="Navega√ß√£o prim√°ria">
        <a href="/#projetos">Projetos</a>
        <a href="/#publicacoes">Publica√ß√µes</a>
        <a href="/#sobre">Sobre</a>
        <a href="/#contato">Contato</a>
        <a href="/guias/"
           class=""
           >Guias</a>
        <button class="theme-toggle" id="themeBtn" title="Alternar tema">üåó</button>
      </nav>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <main class="container">
    <section class="guides-shell">
      <!-- SIDEBAR -->
      <aside class="sidebar" aria-label="√çndice dos guias">
        <details class="side-group" open>
          <summary>Ferramentas</summary>
          <a href="/guias/ferramentas/kraken2/" class="side-item ">Kraken2</a>
          <a href="/guias/ferramentas/qiime2/" class="side-item ">QIIME2</a>
          <a href="/guias/ferramentas/biobakery/" class="side-item ">BioBakery</a>
          <a href="/guias/ferramentas/sra_tools/" class="side-item ">SRA-Tools</a>
          <a href="/guias/ferramentas/git/" class="side-item ">Git</a>
          <a href="/guias/ferramentas/github/" class="side-item ">Github</a>
          <a href="/guias/ferramentas/fastp/" class="side-item ">FASTP</a>
        </details>

        <details class="side-group" open>
          <summary>Aparadores</summary>
          <a href="/guias/aparadores/trimgalore/" class="side-item ">Trimgalore</a>
          <a href="/guias/aparadores/trimmomatic/" class="side-item ">Trimmomatic</a>
        </details>

        <details class="side-group">
          <summary>Ambientes e workflow</summary>
          <a href="/guias/ambientes/anaconda/" class="side-item ">Anaconda</a>
          <a href="/guias/ambientes/snakemake/" class="side-item ">Snakemake</a>
          <a href="/guias/ambientes/nextflow/" class="side-item ">Nextflow</a>
          <a href="/guias/ambientes/docker/" class="side-item active">Docker</a>
        </details>

        <details class="side-group">
          <summary>Conversor de arquivos</summary>
          <a href="/guias/conversores/bcl2fastq/" class="side-item ">BCL2fastq</a>
        </details>

        <details class="side-group">
          <summary>Plataforma</summary>
          <a href="/guias/plataforma/wsl/" class="side-item ">WSL</a>
        </details>

        <details class="side-group">
          <summary>Qualidade de dados</summary>
          <a href="/guias/qualidade/fastqc/" class="side-item ">FASTQC</a>
          <a href="/guias/qualidade/falco/" class="side-item ">FALCO</a>
          <a href="/guias/qualidade/multiqc/" class="side-item ">MULTIQC</a>
        </details>

        <details class="side-group">
          <summary>Meus projetos</summary>
          <a href="/guias/meus_projetos/google_sheets/" class="side-item ">Google Sheets</a>
        </details>

        <details class="side-group">
          <summary>Bitcoin</summary>
          <a href="/guias/bitcoin/bluewallet/" class="side-item ">Bluewallet</a>
        </details>
      </aside>


      <!-- CONTE√öDO DO MARKDOWN -->
      <section class="reader" id="reader">
        <h1>Tutorial de instala√ß√£o do Docker</h1>
        <p><img src="/assets/img/docker/docker_logo.png" alt="Docker logo" /></p>

<h1 id="instala√ß√£o-do-docker--primeiro-container-fastqc"><u>Instala√ß√£o do Docker + primeiro container (FastQC)</u></h1>

<p style="text-align: justify">
  Fala, galera! Bora colocar o <a class="badge badge--docker" href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a> pra rodar no WSL? <br /> 
  Quem nunca sofreu com o famoso "na minha m√°quina funciona"? Pois √©... containers resolvem isso com
  <span class="tooltip">isolamento
    <span class="tooltiptext">Cada app roda em um ambiente fechado, sem atrapalhar o restante do sistema.</span>
  </span>,
  <span class="tooltip">reprodutibilidade
    <span class="tooltiptext">Voc√™ consegue recriar exatamente o mesmo ambiente em qualquer lugar.</span>
  </span> e
  <span class="tooltip">portabilidade
    <span class="tooltiptext">O mesmo container roda no seu notebook, em servidores ou na nuvem sem ajustes.</span>
  </span>.
  No fim das contas, o <span class="badge badge--docker">Docker</span> √© como uma caixa fechada onde voc√™ coloca seu software e garante que vai rodar sempre do mesmo jeito.
</p>

<p>Neste guia, <u>voc√™ vai</u>:</p>

<ul>
  <li>Entender o que √© um container;</li>
  <li>Criar <strong>seu primeiro container</strong> usando o <a href="/guias/qualidade/fastqc/"><strong>FastQC</strong></a> como exemplo.</li>
</ul>

<p><img src="https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3b21zZjJ4djkyenVsZGpnbGwwa2d2NXhtcHd0YXZsNTI2ZWUyZ3UzbiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/jU5TRRcqzeLgS5oCNm/giphy.gif" alt="gif" width="260" style="display:block; margin:auto;" /></p>

<p style="text-align: justify">
<strong>Imagina um porto</strong>: cada navio carrega containers fechados com tudo o que precisam dentro.  
O <span class="badge badge--docker">Docker</span> funciona assim: voc√™ empacota o software em um container e ele chega intacto em qualquer lugar.
</p>

<p>Quer aprender mais sobre <span class="badge badge--docker">Docker</span> acesse o meu medium para <a href="medium.com/#" target="_blank">aprender mais</a>?</p>
<hr />

<h1 id="o-que-√©-o-docker">O que √© o Docker?</h1>

<p>
  O <a class="badge badge--docker" href="https://www.docker.com/" target="_blank" rel="noopener">Docker</a> √© como um
  <span class="tooltip">sistema de containers
    <span class="tooltiptext">Caixas padronizadas que carregam aplicativos e todas as suas depend√™ncias.</span>
  </span>
  que transporta seu software sem dor de cabe√ßa.
</p>

<ul>
  <li>
    Voc√™ usa uma 
    <span class="tooltip"><strong>imagem</strong>
      <span class="tooltiptext">
        Pacote pronto: mini sistema + depend√™ncias + programa.
        √â um molde que n√£o muda e serve para criar containers iguais.
      </span>
    </span>:
    um molde pronto com sistema, bibliotecas e programa configurados.
  </li>

  <li>
    Quando a imagem ‚Äúzarpa‚Äù, ela vira um container: um navio ativo navegando isolado do resto do sistema.
  </li>

  <li>
    √â poss√≠vel rodar 
    <span class="tooltip"><strong>v√°rios containers</strong>
      <span class="tooltiptext">
        Cada um tem seus pr√≥prios processos e arquivos.
        Podem usar a mesma imagem sem ‚Äúbrigar‚Äù entre si.
      </span>
    </span>
    ao mesmo tempo, como uma frota organizada, sem conflitos.
  </li>

  <li>
    O mesmo container pode 
    <span class="tooltip"><strong>‚Äúatracar‚Äù em qualquer porto</strong>
      <span class="tooltiptext">
        A mesma imagem roda do mesmo jeito em notebook, WSL, servidor ou nuvem,
        desde que tenha Docker instalado.
      </span>
    </span>:
    seu notebook, WSL, servidor ou nuvem.
  </li>

  <li>
    Resultado: softwares 
    <span class="tooltip"><strong>reprodut√≠veis</strong>
      <span class="tooltiptext">Mesma vers√£o do app e das depend√™ncias, sempre.</span>
    </span>, 
    <span class="tooltip"><strong>port√°teis</strong>
      <span class="tooltiptext">Voc√™ ‚Äúpuxa‚Äù a imagem (ex.: Docker Hub) e roda em outra m√°quina.</span>
    </span> 
    e 
    <span class="tooltip"><strong>f√°ceis de compartilhar</strong>
      <span class="tooltiptext">Publique com uma tag de vers√£o e qualquer pessoa obt√©m igualzinho.</span>
    </span>.
  </li>
</ul>

<hr />

<h2 id="passo-a-passo">Passo a passo</h2>
<ol>
  <li><a href="#instalacao">Instalando o Docker</a></li>
  <li><a href="#container">Seu primeiro container (FastQC)</a></li>
  <li><a href="#imagem">Criando sua pr√≥pria imagem</a></li>
</ol>

<hr />
<h2 id="instalacao">1. Instalando o Docker</h2>

<p>
  Para usar o <span class="badge badge--docker">Docker</span>, voc√™ precisa do 
  <span class="tooltip"><strong>engine</strong>
    <span class="tooltiptext">Servi√ßo que cria e executa containers. √â o ‚Äúmotor‚Äù do Docker.</span>
  </span> rodando no sistema. No WSL/Ubuntu a instala√ß√£o √© direta.
</p>

<blockquote class="info">
  Se voc√™ j√° tem o <span class="badge badge--docker">Docker</span>, pode pular a instala√ß√£o. Verifique com:
  <pre>docker --version</pre>
  <blockquote class="tip">Dica: recomendo <strong>Ubuntu 20.04 LTS ou superior</strong> (idealmente 22.04 LTS). Confira sua vers√£o com:
  <pre>lsb_release -a</pre>
  </blockquote>
</blockquote>

<h3>1.1 Instalando o Docker (WSL/Ubuntu)</h3>

<pre>sudo apt update
sudo apt install -y docker.io</pre>

<p>Verifique se o servi√ßo est√° ativo:</p>
<pre>sudo systemctl status docker</pre>

<p>Sa√≠da esperada (algo como):</p>
<p><img src="/assets/img/docker/docker_1.png" alt="Docker 1" /></p>

<blockquote class="info">
  <strong>WSL e systemctl:</strong> se esse comando n√£o funcionar, tente:
  <br /><code class="codeStyle">sudo service docker status</code>.
  Em algumas instala√ß√µes do WSL √© preciso habilitar o <code class="codeStyle">systemd</code> em <code class="codeStyle">/etc/wsl.conf</code> e reiniciar o WSL (<code class="codeStyle">wsl.exe --shutdown</code>).
</blockquote>

<p>Sa√≠da esperada (algo como):</p>
<p><img src="/assets/img/docker/docker_2.png" alt="Docker 2" /></p>

<h3>1.2 P√≥s-instala√ß√£o e teste</h3>

<p>Permita usar o <span class="badge badge--docker">Docker</span> sem <code class="codeStyle">sudo</code>:</p>
<pre>sudo usermod -aG docker $USER
newgrp docker</pre>

<blockquote class="tip">
  <strong>Grupo docker:</strong> o <code class="codeStyle">newgrp docker</code> aplica a permiss√£o na sess√£o atual.
  Para persistir, feche e reabra o terminal (ou rode <code class="codeStyle">wsl.exe --shutdown</code> e abra o WSL de novo).
</blockquote>

<p>Teste a instala√ß√£o:</p>
<pre>docker --version</pre>

<p>Sa√≠da esperada (algo como):</p>
<p><code style="display:inline-block; background:#2d2d2d; color:#e1e1e1; border-radius:6px; padding:8px 12px; white-space:pre; line-height:1.4;">Docker version 24.0.x, build XXXXXXX
</code></p>

<blockquote class="info">
  <strong>Teste r√°pido do engine:</strong>
  <pre>docker run --rm hello-world</pre>
  <small>Se aparecer a mensagem de boas-vindas, o engine est√° OK.</small>
</blockquote>

<div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>Comando</th>
        <th>Descri√ß√£o</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="codeStyle">sudo apt update</code></td>
        <td>Atualiza a lista de pacotes do Ubuntu.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">sudo apt install -y docker.io</code></td>
        <td>Instala o <span class="badge badge--docker">Docker</span> Engine do reposit√≥rio do Ubuntu.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">sudo systemctl status docker</code></td>
        <td>Verifica se o servi√ßo do <span class="badge badge--docker">Docker</span> est√° em execu√ß√£o.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">sudo usermod -aG docker $USER</code></td>
        <td>Adiciona seu usu√°rio ao grupo <code class="codeStyle">docker</code> (rodar sem <code class="codeStyle">sudo</code>).</td>
      </tr>
      <tr>
        <td><code class="codeStyle">newgrp docker</code></td>
        <td>Aplica a nova permiss√£o na sess√£o atual.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">docker --version</code></td>
        <td>Exibe a vers√£o instalada do <span class="badge badge--docker">Docker</span>.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">docker run --rm hello-world</code></td>
        <td>Valida o funcionamento do engine executando um container de teste.</td>
      </tr>
    </tbody>
  </table>
</div>

<blockquote class="tip">
  <strong>Quero a vers√£o oficial mais recente:</strong><br />
  <code class="codeStyle">curl -fsSL https://get.docker.com | sh</code><br />
  (instala a vers√£o est√°vel diretamente da <span class="badge badge--docker">Docker</span>)
  <blockquote class="warning">
  <strong>Seguran√ßa:</strong> <code class="codeStyle">curl | sh</code> executa um script da internet.
  Use apenas se confiar na fonte; quando poss√≠vel, prefira os pacotes do Ubuntu.
  </blockquote>
</blockquote>

<hr />

<h2 id="container">2. Seu primeiro container (FastQC)</h2>

<p>
  Agora que o <span class="badge badge--docker">Docker</span> est√° instalado, √© hora de colocar um container para navegar.
  Vamos usar o <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/" target="_blank">
    <span class="tooltip"><strong>FastQC</strong>
      <span class="tooltiptext">Ferramenta popular para checar a qualidade de arquivos FASTQ.</span>
    </span>
  </a> como exemplo.
</p>

<h3>2.1 Baixando a imagem</h3>

<p>
  No <span class="badge badge--docker">Docker</span>, tudo come√ßa com uma <span class="tooltip"><strong>imagem</strong>
    <span class="tooltiptext">Pacote que cont√©m o programa e suas depend√™ncias.</span>
  </span>.  
  Para o FastQC, existe uma imagem no <a href="https://hub.docker.com/r/biocontainers/fastqc/tags" target="_blank">Docker Hub</a>.  
  <p>
    Aten√ß√£o: esse reposit√≥rio n√£o tem a tag
    <span class="tooltip"><code class="codeStyle">latest</code>
      <span class="tooltiptext">Tag padr√£o que o Docker usa quando nenhuma vers√£o √© informada (equivale a <code>:latest</code>). Muitos projetos n√£o publicam <code>latest</code> para for√ßar que voc√™ escolha uma vers√£o espec√≠fica/est√°vel.</span>
    </span>,
    ent√£o √© preciso especificar a vers√£o.
  </p>
</p>

<p>
  Uma vers√£o est√°vel muito usada √© a <strong>v0.11.9_cv8</strong>. Para baixar:
</p>

<pre>docker pull biocontainers/fastqc:v0.11.9_cv8</pre>

<blockquote class="warning">
  Esta era a vers√£o est√°vel no momento da escrita. Verifique se h√° vers√µes mais novas no Docker Hub antes de baixar.
</blockquote>

<h3>2.2 Rodando o container</h3>

<p>Preparando o ambiente de trabalho:</p>

<p>Crie uma pasta para o workflow e um diret√≥rio de dados:</p>
<pre>mkdir -p ~/docker_tutorial/data
cd ~/docker_tutorial</pre>

<blockquote class="info">
  Baixe os FASTQs com o <a href="/guias/ferramentas/sra_tools" target="_blank">SRA-Tools</a> (exemplo com o SRR34840432).<br />
  <small>Se voc√™ j√° tem seus <code>.fastq.gz</code>, basta coloc√°-los em <code>~/docker_tutorial/data</code>.</small>
</blockquote>

<p>Exemplo com dois arquivos FASTQ (R1 e R2):</p>

<pre>mkdir -p results &amp;&amp; \
  docker run --rm \
  -u "$(id -u)":"$(id -g)" \
  -v "$(pwd)":/data:rw -w /data \
  biocontainers/fastqc:v0.11.9_cv8 \
  fastqc -o results -t "$(nproc)" data/SRR34840432_1.fastq.gz data/SRR34840432_2.fastq.gz
</pre>

<div class="table-wrap">
  <table>
    <thead>
      <tr>
        <th>Elemento</th>
        <th>Descri√ß√£o</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="codeStyle">mkdir -p results</code></td>
        <td>Cria a pasta <code class="codeStyle">results/</code> no host, se n√£o existir (idempotente).</td>
      </tr>
      <tr>
        <td><code class="codeStyle">--rm</code></td>
        <td>Remove o container ao terminar (n√£o deixa res√≠duos).</td>
      </tr>
      <tr>
        <td><code class="codeStyle">-u "$(id -u)":"$(id -g)"</code></td>
        <td>Executa como seu usu√°rio/grupo do host; evita arquivos gerados com dono <em>root</em>.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">-v "$(pwd)":/data:rw</code></td>
        <td>Monta a pasta atual em <code class="codeStyle">/data</code> com leitura/escrita (<code class="codeStyle">rw</code>).</td>
      </tr>
      <tr>
        <td><code class="codeStyle">-w /data</code></td>
        <td>Define o diret√≥rio de trabalho (<span class="tooltip"><strong>workdir</strong><span class="tooltiptext">Diret√≥rio padr√£o onde os comandos s√£o executados.</span></span>) dentro do container.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">biocontainers/fastqc:v0.11.9_cv8</code></td>
        <td>Imagem usada no <em>run</em>; fornece o execut√°vel <code class="codeStyle">fastqc</code> no container.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">fastqc -o results -t "$(nproc)" ...</code></td>
        <td>Roda o FastQC salvando relat√≥rios em <code class="codeStyle">results/</code> (dentro de <code class="codeStyle">/data</code> ‚áí no host: <code class="codeStyle">./results</code>) e usa todos os n√∫cleos dispon√≠veis.</td>
      </tr>
      <tr>
        <td><code class="codeStyle">data/SRR34840432_1.fastq.gz</code> <br /><code class="codeStyle">data/SRR34840432_2.fastq.gz</code></td>
        <td>Entradas (FASTQs) vistas pelo container como caminhos relativos ao <code class="codeStyle">/data</code> por causa do <code class="codeStyle">-w /data</code>.</td>
      </tr>
    </tbody>
  </table>
</div>

<blockquote class="tip">
  <strong>Processar tudo de uma vez:</strong>
  <pre>mkdir -p results &amp;&amp; \
  docker run --rm -u "$(id -u)":"$(id -g)" -v "$(pwd)":/data -w /data \
  biocontainers/fastqc:v0.11.9_cv8 \
  fastqc -o results -t "$(nproc)" data/*.fastq.gz</pre>
</blockquote>

<h3>2.3 Conferindo os resultados</h3>

<p>Para cada arquivo analisado, o FastQC gera:</p>
<ul>
  <li>Um relat√≥rio <code>.html</code> com gr√°ficos de qualidade;</li>
  <li>Um arquivo <code>.zip</code> com dados detalhados.</li>
</ul>

<blockquote class="info">
  Com <code class="codeStyle">-o results</code>, os relat√≥rios do FastQC s√£o salvos em <code class="codeStyle">./results</code> no host
  (garantido pelo mapeamento <code class="codeStyle">-v "$(pwd)":/data</code>, que exp√µe ao container a pasta do projeto com os arquivos <code class="codeStyle">*.fastq.gz</code> (ex.: <code class="codeStyle">./data/*.fastq.gz</code>) em <code class="codeStyle">/data</code>, e pelo <code class="codeStyle">-w /data</code>, que permite usar caminhos relativos e salvar em <code class="codeStyle">results/</code>.)
</blockquote>

<p>A sua sa√≠da deve ser parecida com essa:</p>

<p><img src="/assets/img/docker/docker_3.png" alt="Docker 3" /></p>

<blockquote class="tip">
  <strong>Met√°fora r√°pida (vers√£o estendida):</strong>
  pense no container como um navio; o <code class="codeStyle">-v</code> √© o <em>por√£o</em> abrindo uma escotilha entre o cais (seu host) e o navio (container).
</blockquote>

<h2 id="imagem">3. Criando sua pr√≥pria imagem (FastQC)</h2>

<p>
  At√© agora usamos a imagem pronta do Docker Hub.
  Mas e se voc√™ quiser <strong>montar sua pr√≥pria imagem</strong> com o FastQC instalado?
  Isso √© √∫til quando voc√™ precisa de vers√µes espec√≠ficas ou combinar v√°rias ferramentas no mesmo container.
</p>

<h3>3.1 Preparando a pasta de trabalho</h3>

<pre>mkdir -p ~/docker_tutorial/fastqc_custom
cd ~/docker_tutorial/fastqc_custom</pre>

<p>Essa ser√° a pasta onde vamos salvar o <code>Dockerfile</code> e construir a nova imagem.</p>

<h3>3.2 Criando o Dockerfile</h3>

<p>Use o <code>nano</code> para criar o arquivo:</p>
<pre>nano Dockerfile</pre>

<p>Cole o conte√∫do abaixo (imagem base enxuta, locale definido, JRE headless e FastQC):</p>

<pre>
# syntax=docker/dockerfile:1
FROM ubuntu:22.04

ENV DEBIAN_FRONTEND=noninteractive \
    LC_ALL=C.UTF-8 \
    LANG=C.UTF-8

# Instala FastQC e depend√™ncias essenciais (Java headless + certificados) e limpa caches
RUN apt-get update &amp;&amp; \
    apt-get install -y --no-install-recommends fastqc default-jre-headless ca-certificates &amp;&amp; \
    rm -rf /var/lib/apt/lists/*

# Diret√≥rio de trabalho padr√£o para I/O
WORKDIR /data

# Execut√°vel padr√£o: permite "docker run minha_img --help"
ENTRYPOINT ["fastqc"]
# Argumento padr√£o (pode ser sobrescrito): mostra ajuda se rodar sem nada
CMD ["--help"]
</pre>

<blockquote class="info">
  No nano:<br />
  ‚Äì <kbd>Ctrl</kbd> + <kbd>O</kbd> ‚Üí salva <kbd>Enter</kbd><br />
  ‚Äì <kbd>Ctrl</kbd> + <kbd>X</kbd> ‚Üí sai
</blockquote>

<h3>3.3 Construindo a imagem</h3>

<p>Construa e d√™ uma tag expl√≠cita (boa pr√°tica):</p>
<pre>docker build -t meu_fastqc:0.11.9 .</pre>

<ul>
  <li><code>-t meu_fastqc:0.11.9</code>: nome e vers√£o da sua imagem.</li>
  <li><code>.</code>: usa o diret√≥rio atual como contexto (onde est√° o Dockerfile).</li>
</ul>

<blockquote class="tip">
  <strong>Teste r√°pido:</strong>
  <pre>docker run --rm meu_fastqc:0.11.9 --version</pre>
</blockquote>

<h3>3.4 Rodando sua imagem personalizada</h3>

<p>
  Baixe seus FASTQs (R1/R2). Caso n√£o saiba, veja
  <a href="/guias/ferramentas/sra_tools" target="_blank">este tutorial</a> para obter os arquivos.
</p>

<pre>mkdir -p results &amp;&amp; \
docker run --rm \
  -u "$(id -u)":"$(id -g)" \
  -v "$(pwd)":/data:rw -w /data \
  meu_fastqc:0.11.9 \
  -o results -t "$(nproc)" \
  data/SRR34840432_1.fastq.gz data/SRR34840432_2.fastq.gz
</pre>

<blockquote class="tip">
  <strong>Processar todos os FASTQs da pasta:</strong>
  <pre>mkdir -p results &amp;&amp; \
docker run --rm \
  -u "$(id -u)":"$(id -g)" \
  -v "$(pwd)":/data:rw -w /data \
  meu_fastqc:0.11.9 \
  -o results -t "$(nproc)" \
  data/*.fastq.gz</pre>
</blockquote>

<h3 id="dockerignore">3.5 Otimizando o build: <code class="codeStyle">.dockerignore</code> e <em>build context</em></h3>

<p>
  Quando voc√™ executa <code class="codeStyle">docker build &lt;contexto&gt;</code>, o √∫ltimo argumento √© a <strong>pasta de contexto</strong>.
  Em <code class="codeStyle">docker build .</code>, o ponto significa ‚Äú<em>use a pasta atual como contexto</em>‚Äù.
  O cliente Docker empacota (faz um tar) de tudo que est√° no contexto <em>n√£o ignorado</em> e envia para o
  <span class="tooltip"><strong>daemon<span class="tooltiptext">Servi√ßo <code>dockerd</code> que constr√≥i imagens e executa containers.</span></strong></span>
  fazer o <span class="tooltip"><strong>build<span class="tooltiptext">Processo de criar a imagem a partir do Dockerfile; cada instru√ß√£o gera/reutiliza camadas (cache).</span></strong></span>.
</p>

<blockquote class="info">
  <strong>Por que isso importa?</strong><br />
  Se o contexto tiver FASTQs/relat√≥rios grandes, o envio (‚Äú<em>Sending build context...</em>‚Äù) fica lento e
  qualquer mudan√ßa nesses arquivos pode invalidar o <span class="tooltip"><strong>cache<span class="tooltiptext">Reuso de camadas j√° constru√≠das quando nada relevante mudou.</span></strong></span>
  de etapas como <code class="codeStyle">COPY</code>. O <code class="codeStyle">.dockerignore</code> filtra o que entra no contexto, deixando o build mais r√°pido e previs√≠vel.
</blockquote>

<blockquote class="warning">
  <strong>Por que evitar dados no build?</strong><br />
  ‚Ä¢ Imagens maiores e lentas de distribuir.<br />
  ‚Ä¢ Cache inst√°vel (dados mut√°veis quebram camadas).<br />
  ‚Ä¢ Layers imut√°veis: deletar no Dockerfile n√£o ‚Äútira‚Äù o peso.<br />
  ‚Ä¢ Risco de comportamento inesperado (configs/artefatos indevidos).<br />
  ‚Ä¢ Exposi√ß√£o de dados sens√≠veis.
</blockquote>

<blockquote class="tip">
  <strong>Padr√£o recomendado:</strong><br />
  ‚Ä¢ Use <code class="codeStyle">.dockerignore</code> e evite <code class="codeStyle">COPY . .</code>.<br />
  ‚Ä¢ Copie s√≥ o que √© necess√°rio para executar a ferramenta.<br />
  ‚Ä¢ Monte dados em runtime com <code class="codeStyle">-v</code> (<em>bind mount</em>).<br />
  ‚Ä¢ Se precisar processar no build, use <em>multi-stage</em> e n√£o leve dados ao est√°gio final.
</blockquote>

<blockquote class="tip">
  <strong>Regra de ouro:</strong> o <code class="codeStyle">.dockerignore</code> fica na <em>mesma pasta do contexto</em> do build. Se voc√™ roda <code class="codeStyle">docker build .</code> em <code class="codeStyle">~/docker_tutorial/fastqc_custom</code>, √© l√° que o <code class="codeStyle">.dockerignore</code> deve existir.
</blockquote>

<h4>3.5.1 Crie um <code class="codeStyle">.dockerignore</code> m√≠nimo</h4>

<p>Abra o arquivo na mesma pasta do seu <code class="codeStyle">Dockerfile</code> e cole o conte√∫do abaixo:</p>
<pre>nano .dockerignore</pre>

<blockquote class="info">
  <strong>Por que usar <code class="codeStyle">.dockerignore</code>?</strong><br />
  Ele reduz o tamanho do
  <span class="tooltip"><strong>build context
    <span class="tooltiptext">Tudo que est√° na pasta usada como contexto (geralmente <code>.</code>) e que √© enviado ao Docker para construir a imagem.</span>
  </strong></span>
  deixando os
  <span class="tooltip"><strong>builds
    <span class="tooltiptext">Processo de construir uma imagem a partir do Dockerfile, gerando camadas reutiliz√°veis.</span>
  </strong></span>
  mais r√°pidos mant√©m o
  <span class="tooltip"><strong>cache
    <span class="tooltiptext">Camadas (layers) j√° constru√≠das que o Docker reaproveita se nada relevante mudou.</span>
  </strong></span>
  previs√≠vel e evita enviar dados pesados/sens√≠veis para o
  <span class="tooltip"><strong>daemon
    <span class="tooltiptext">O servi√ßo em segundo plano do Docker (<code>dockerd</code>) que executa builds, containers, redes e volumes.</span>
  </strong></span>
  durante o build.
</blockquote>

<pre># .dockerignore ‚Äî recomendado para este tutorial
data/
results/

*.fastq
*.fastq.gz
*.sra
*.zip
*.html
</pre>

<blockquote class="tip">
  <strong>No nano:</strong> <kbd>Ctrl</kbd>+<kbd>O</kbd> para salvar, <kbd>Enter</kbd> para confirmar, depois <kbd>Ctrl</kbd>+<kbd>X</kbd> para sair.
</blockquote>

<h4>3.5.2 Boas pr√°ticas r√°pidas</h4>
<ul>
  <li>Mantenha o contexto enxuto: deixe apenas o que ser√° <code class="codeStyle">COPY</code> junto do Dockerfile; <em>dados</em> ficam fora.</li>
  <li>Prefira montar dados no <code class="codeStyle">docker run</code> com <code class="codeStyle">-v</code> em vez de copi√°-los para a imagem.</li>
  <li>Use tags expl√≠citas nas imagens (<code class="codeStyle">meu_fastqc:0.11.9</code>) para builds reproduz√≠veis.</li>
  <li>Se o Dockerfile estiver em uma subpasta, combine <code class="codeStyle">-f</code> com um contexto m√≠nimo:
    <br /><code class="codeStyle">docker build -t meu_fastqc:0.11.9 -f fastqc_custom/Dockerfile fastqc_custom/</code>
  </li>
</ul>

<blockquote class="info">
  <strong>WSL/Docker Desktop:</strong> reduzir o contexto diminui muito o tempo naquele passo ‚ÄúSending build context to Docker daemon‚Ä¶‚Äù.
  Em pastas com FASTQs, a transfer√™ncia pode chegar a v√°rios GB ‚Äî o <code class="codeStyle">.dockerignore</code> elimina esse overhead.
</blockquote>

<p>
  Pronto! Agora o comando est√° rodando com a sua pr√≥pria imagem em vez de rodar em BioContainers.
</p>

<blockquote class="tip">
  Voc√™ pode personalizar ainda mais o Dockerfile, adicionando outras ferramentas
  (ex.: Trimmomatic, MultiQC) e criando um container ‚Äútudo em um‚Äù para seu pipeline.
</blockquote>

<h3 id="verificacao">3.6 Conferindo a imagem criada</h3>

<p>
  Depois de construir a sua imagem, voc√™ pode verificar se ela foi salva no <span class="badge badge--docker">Docker</span> local:
</p>

<pre>docker images</pre>

<p>Sa√≠da esperada (exemplo):</p>
<pre>
REPOSITORY    TAG       IMAGE ID       CREATED          SIZE
meu_fastqc    0.11.9    123abc456def   2 minutes ago    350MB
</pre>

<ul>
  <li><strong>REPOSITORY</strong>: nome da imagem (no nosso caso, <code class="codeStyle">meu_fastqc</code>).</li>
  <li><strong>TAG</strong>: vers√£o atribu√≠da (ex.: <code class="codeStyle">0.11.9</code>).</li>
  <li><strong>IMAGE ID</strong>: identificador √∫nico da imagem.</li>
  <li><strong>CREATED</strong>: quando foi constru√≠da.</li>
  <li><strong>SIZE</strong>: tamanho final da imagem.</li>
</ul>

<p>Se quiser ver detalhes completos (camadas, vari√°veis de ambiente, comandos padr√£o), use:</p>
<pre>docker inspect meu_fastqc:0.11.9</pre>

<blockquote class="tip">
  <strong>Dica:</strong> para remover e come√ßar de novo:
  <code class="codeStyle">docker rmi meu_fastqc:0.11.9</code>
</blockquote>

<h3 id="listar-imagens">Como ver (listar) suas imagens</h3>

<pre>docker image ls</pre>

<blockquote class="tip">
  <strong>Filtros √∫teis:</strong><br />
  <code class="codeStyle">docker image ls meu_fastqc</code><br />
  <code class="codeStyle">docker image ls --filter "reference=meu_fastqc:0.11.9"</code><br />
  <code class="codeStyle">docker image ls -a</code> <small>(inclui camadas intermedi√°rias)</small><br />
  <code class="codeStyle">docker image ls --digests</code> <small>(mostra o digest)</small><br /><br />
  <strong>Apenas ‚Äúdangling‚Äù (&lt;none&gt;:&lt;none&gt;):</strong><br />
  <code class="codeStyle">docker image ls --filter dangling=true</code>
</blockquote>

<blockquote class="info">
  <strong>Espa√ßo em disco:</strong><br />
  <code class="codeStyle">docker system df</code>
</blockquote>

<hr />

<h3 id="remover-imagens">Como remover imagens</h3>

<p><strong>Remover uma imagem espec√≠fica (por nome:tag):</strong></p>
<pre>docker image rm meu_fastqc:0.11.9</pre>

<p><strong>Remover por ID (copie da coluna IMAGE ID):</strong></p>
<pre>docker image rm 123abc456def</pre>

<p><strong>Remover imagens ‚Äúsoltas‚Äù (dangling):</strong></p>
<pre>docker image prune -f</pre>

<p><strong>Remover <u>todas</u> as imagens n√£o utilizadas por nenhum container:</strong></p>
<pre>docker image prune -a -f</pre>

<blockquote class="tip">
  <strong>Remover imagens antigas com filtro de tempo:</strong><br />
  <code class="codeStyle">docker image prune -a -f --filter "until=72h"</code>
  <blockquote class="warning">
    <strong>Cuidado:</strong> <code class="codeStyle">prune -a</code> remove qualquer imagem que n√£o esteja em uso
    por um container (inclusive as que voc√™ baixou mas n√£o est√° usando agora).
  </blockquote>
</blockquote>

<p><strong>Remover <u>todas</u> as imagens (for√ßa bruta):</strong></p>
<pre>docker image rm $(docker image ls -q)</pre>

<hr />

<h1 id="conclus√£o">Conclus√£o</h1>

<p>
  F√°cil, n√©? Agora voc√™ j√° sabe como instalar o <span class="badge badge--docker">Docker</span>, puxar uma imagem e rodar seu primeiro container.  
  Voltando √† met√°fora do porto: voc√™ aprendeu a receber navios (imagens), descarregar containers (rodar programas) e acessar a carga (seus arquivos e resultados).
</p>

<ul>
  <li><strong>Isolamento:</strong> cada app no seu pr√≥prio container.</li>
  <li><strong>Portabilidade:</strong> roda no notebook, servidor ou nuvem.</li>
  <li><strong>Reprodutibilidade:</strong> qualquer pessoa pode repetir a an√°lise.</li>
</ul>

<p>
  O pr√≥ximo passo √© explorar outras imagens do <a href="https://hub.docker.com/" target="_blank">Docker Hub</a>  
  ou at√© criar sua pr√≥pria imagem personalizada para pipelines bioinform√°ticos.
</p>

<blockquote class="tip">
  <strong>Dica:</strong> Combine <span class="badge badge--docker">Docker</span> com workflows (como Nextflow ou Snakemake).  
  Assim, cada etapa roda em seu pr√≥prio container, garantindo reprodutibilidade total.
</blockquote>

<p>Miss√£o cumprida, capit√£o! üõ≥Ô∏è‚öì</p>

<p><img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExZGxtbjVqOWw3dmRtdXB6cHRtbGlvZGV6anFsZ25vOXU0bW5tZHFzdyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/3o7abKhOpu0NwenH3O/giphy.gif" alt="gif" width="200" style="display:block; margin:auto;" /></p>

<hr />

<p>Se curtiu, d√° aquele apoio no <a href="https://www.linkedin.com/in/christopher-lee-390643197/" target="_blank">LinkedIn</a> e considere um caf√©zinho ‚òï para manter o projeto vivo. Valeu!</p>

<p>Pix: <a href="mailto:biologolee@gmail.com">biologolee@gmail.com</a><br />
Bitcoin: bc1qg7qrfhclzt3sm60en53qv8fmwpuacfaxt5v55k</p>

<p><img src="/assets/img/meus_projetos/bluewallet_qrcode.png" alt="QR Code" /></p>

<h1 id="refer√™ncias">Refer√™ncias</h1>

<ol>
  <li><a href="https://docs.docker.com/get-started/" target="_blank">Documenta√ß√£o oficial do Docker</a></li>
  <li><a href="https://hub.docker.com/" target="_blank">Docker Hub</a></li>
</ol>

      </section>
    </section>
  </main>

  <button id="btn-top" aria-label="Voltar ao topo">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
      <path d="M12 4l-7 7h4v9h6v-9h4z"/>
    </svg>
    <span class="tooltip">Voltar ao topo</span>
  </button>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">¬© <span id="year"></span> Christopher William Lee ‚Äî Guias</div>
  </footer>
  
  <script src="/assets/js/main.js"></script>
</body>
</html>
